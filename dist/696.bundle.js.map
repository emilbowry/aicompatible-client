{"version":3,"file":"696.bundle.js","mappings":"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","sources":["webpack://simpleapp/./src/pages/demo/DemoPage.tsx"],"sourcesContent":["// client/src/pages/demo/DemoPage.tsx\n\n// client/src/pages/demo/DemoPage.tsx\n\nimport React, {\n\tcreateContext,\n\tuseContext,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from \"react\";\n// import { DocumentAnalysisViewer } from \"../dpo-tool/css_dual\";\nimport { DocumentAnalysisViewer } from \"../dpo-tool/CSS_Markdown/CSSMarkdown\";\nimport { ExperimentScene } from \"./DemoCube\";\n\n// import { DocumentAnalysisViewer } from \"../dpo-tool/dual\";\nexport const CONFIG = {\n\titemHeight: 10,\n\titemWidth: 15,\n\tradius: 70,\n\tcontainerHeightRatio: 1,\n};\n\nconst TestFC = () => <>T</>;\nconst DemoComponents = [\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n];\n\nconst getContainerStyle = (): React.CSSProperties => ({\n\tposition: \"fixed\",\n\twidth: \"100%\",\n\toverflow: \"visible\",\n\n\theight: \"100%\",\n});\n\nconst container_style: React.CSSProperties = {\n\theight: `calc(${100}%)`,\n\taspectRatio: \"1\",\n\toverflow: \"visible\",\n};\nconst getItemStyle = (\n\tmarginTop: number,\n\tmarginLeft: number,\n\tz_score: number,\n\n\topacity_function: (z_score: number) => number\n): React.CSSProperties => ({\n\tposition: \"absolute\",\n\n\theight: `${CONFIG.itemHeight}vh`,\n\twidth: `${CONFIG.itemWidth}vh`,\n\tdisplay: \"flex\",\n\tmarginTop: `${marginTop}vh`,\n\t// transform: `translateY(${marginTop - CONFIG.itemHeight / 2}%)`, // doesnt work since its now wrt to item height\n\tmarginLeft: `calc(${marginLeft - CONFIG.itemWidth / 2}vh)`,\n\n\ttextAlign: \"center\",\n\tjustifyContent: \"center\",\n\talignItems: \"center\",\n\n\topacity: opacity_function(z_score),\n\tvisibility: opacity_function(z_score) > 0 ? \"visible\" : \"hidden\",\n\t// background: \"red\",\n\tcolor: \"#ffffff\",\n\tzIndex: 200 + z_score,\n\toverflow: \"visible\",\n});\n\nconst getHelperLineStyle = (): React.CSSProperties => ({\n\tposition: \"absolute\",\n\tleft: 0,\n\twidth: \"100%\",\n\theight: \"1px\",\n\t// background: \"red\",\n\topacity: 0.3,\n});\n\ninterface WheelItemProps {\n\tComponent: React.ReactNode;\n\tindex: number;\n}\n\ninterface ScrollWheelProps {\n\titems: React.ReactNode[];\n}\nexport const opacityFunc = (z_score: number) =>\n\tMath.floor(z_score / (2 * Math.PI)) === 0 ? Math.sin(z_score) : 0;\nconst WheelItem: React.FC<WheelItemProps> = ({ Component, index }) => {\n\tconst { rotation, opacity_function, total_items } =\n\t\tuseContext(ScrollWheelContext);\n\tconst theta =\n\t\t2 *\n\t\tMath.asin(\n\t\t\tMath.sqrt(CONFIG.itemHeight ** 2 + CONFIG.itemWidth ** 2) /\n\t\t\t\tCONFIG.radius\n\t\t);\n\t// testing minimal distance\n\tconst items_per_half_turn = Math.PI / theta;\n\t// const total_items = 31;\n\tconst total_turns = Math.floor(total_items / (items_per_half_turn * 2)) + 1;\n\t// const theta = Math.PI / items_per_half_turn;\n\n\tconst current_angle = theta * -index + rotation;\n\tconst z_score = current_angle % (2 * Math.PI * total_turns);\n\t// const opacity_score =\n\t// \tMath.floor(z_score / (2 * Math.PI)) === 0 ? Math.sin(z_score) : 0;\n\tconst factor = CONFIG.radius / 2;\n\tconst marginLeft = 1 * Math.sin(current_angle) * factor; // ASSUME SQUARE FOR NOW\n\tconst marginTop = (1 - 1 * Math.cos(current_angle)) * factor;\n\tconst style = getItemStyle(\n\t\tmarginTop,\n\t\tmarginLeft,\n\t\tz_score,\n\t\topacity_function\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\t// onClick={() => setIsActive(!isActive)}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={{ height: \"unset\", width: \"unset\", overflow: \"visible\" }}\n\t\t\t>\n\t\t\t\t{Component}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nconst ScrollWheelContext = createContext({\n\trotation: 0,\n\ttotal_items: 0,\n\topacity_function: opacityFunc,\n});\n\nconst useScrollController = (initial_rotation = 0) => {\n\tconst [rotation, setRotation] = useState(\n\t\t() => (initial_rotation * Math.PI) / 180\n\t);\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst element = ref.current;\n\t\tif (!element) return;\n\n\t\tconst handleWheel = (e: WheelEvent) => {\n\t\t\te.preventDefault();\n\t\t\tconst innerHeight = window.innerHeight;\n\t\t\tconst delta_y = e.deltaY;\n\t\t\tconst tangent_distance = innerHeight / 2 / 2;\n\n\t\t\tconst delta_theta = Math.atan(delta_y / tangent_distance);\n\n\t\t\tsetRotation((prev) => prev + delta_theta);\n\t\t};\n\n\t\telement.addEventListener(\"wheel\", handleWheel, { passive: false });\n\n\t\treturn () => {\n\t\t\telement.removeEventListener(\"wheel\", handleWheel);\n\t\t};\n\t}, []);\n\n\treturn { rotation, ref };\n};\n\ninterface ScrollWheelProps {\n\titems: React.ReactNode[];\n\tinitial_rotation?: number;\n\topacity_function?: (z_score: number) => number;\n}\nconst ArcScrollWheel: React.FC<ScrollWheelProps> = ({\n\titems,\n\tinitial_rotation = 0,\n\topacity_function = opacityFunc,\n}) => {\n\tconst containerStyle = getContainerStyle();\n\tconst helperLineStyle = getHelperLineStyle();\n\tconst total_items = items.length;\n\tconst { rotation, ref } = useScrollController(initial_rotation);\n\n\treturn (\n\t\t<ScrollWheelContext\n\t\t\tvalue={{\n\t\t\t\trotation,\n\t\t\t\ttotal_items,\n\t\t\t\topacity_function,\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={container_style}\n\t\t\t\tclassName=\"no-aos\"\n\t\t\t\tonMouseLeave={() => console.log(\"left\")}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={containerStyle}\n\t\t\t\t\tref={ref}\n\t\t\t\t>\n\t\t\t\t\t{items.map((Comp, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WheelItem\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\tComponent={Comp}\n\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<div style={helperLineStyle} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ScrollWheelContext>\n\t);\n};\nconst DemoWheelScroll = () => <ArcScrollWheel items={DemoComponents} />;\nexport { ArcScrollWheel, DemoWheelScroll };\nconst DemoContainer = () => {\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\theight: `calc(${CONFIG.radius + CONFIG.itemHeight}vh)`,\n\t\t\t\twidth: `calc(${CONFIG.radius / 2 + CONFIG.itemWidth / 2}vh)`,\n\t\t\t}}\n\t\t>\n\t\t\t<ArcScrollWheel items={DemoComponents} />\n\t\t</div>\n\t);\n};\nexport default DemoContainer;\n"],"names":["CONFIG","itemHeight","itemWidth","radius","containerHeightRatio","TestFC","_jsx","_Fragment","children","DemoComponents","container_style","height","concat","aspectRatio","overflow","opacityFunc","z_score","Math","floor","PI","sin","WheelItem","_ref","Component","index","rotation","opacity_function","total_items","useContext","ScrollWheelContext","theta","asin","sqrt","items_per_half_turn","total_turns","current_angle","factor","marginLeft","style","getItemStyle","marginTop","position","width","display","textAlign","justifyContent","alignItems","opacity","visibility","color","zIndex","cos","createContext","ArcScrollWheel","_ref2","items","initial_rotation","length","ref","arguments","undefined","setRotation","useState","useRef","useEffect","element","current","handleWheel","e","preventDefault","innerHeight","window","delta_y","deltaY","tangent_distance","delta_theta","atan","prev","addEventListener","passive","removeEventListener","useScrollController","value","className","onMouseLeave","console","log","_jsxs","map","Comp","i","left","DemoWheelScroll","DemoContainer"],"ignoreList":[],"sourceRoot":""}